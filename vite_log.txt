
> candy_world@1.0.0 dev
> npm run build:wasm && vite


> candy_world@1.0.0 build:wasm
> asc assembly/index.ts --outFile public/candy_physics.wasm --textFile public/candy_physics.wat --sourceMap --shrinkLevel 0 --optimize --converge --optimizeLevel 3


  VITE v7.3.0  ready in 309 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
(!) Failed to run dependency scan. Skipping dependency pre-bundling. Error: The following dependencies are imported but could not be resolved:

  loader.mjs (imported by /app/emsdk/upstream/emscripten/test/pthread/main_js_with_loader.html)

Are they installed?
    at file:///app/node_modules/vite/dist/node/chunks/config.js:31902:33
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///app/node_modules/vite/dist/node/chunks/config.js:34110:15
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/animation.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/animation.js:2:27
  1  |  import * as THREE from 'three';
  2  |  import { freqToHue } from '../../wasm-loader.js';
     |                             ^
  3  |  import { reactiveMaterials, _foliageReactiveColor } from './common.js';
  4  |
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:20:45 PM [vite] (client) ✨ new dependencies optimized: three, three/examples/jsm/capabilities/WebGPU.js, three/webgpu, three/examples/jsm/controls/PointerLockControls.js, three/tsl
6:20:45 PM [vite] Internal server error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
      at TransformPluginContext._formatLog (file:///app/node_modules/vite/dist/node/chunks/config.js:28998:43)
      at TransformPluginContext.error (file:///app/node_modules/vite/dist/node/chunks/config.js:28995:14)
      at normalizeUrl (file:///app/node_modules/vite/dist/node/chunks/config.js:27118:18)
      at async file:///app/node_modules/vite/dist/node/chunks/config.js:27176:32
      at async Promise.all (index 3)
      at async TransformPluginContext.transform (file:///app/node_modules/vite/dist/node/chunks/config.js:27144:4)
      at async EnvironmentPluginContainer.transform (file:///app/node_modules/vite/dist/node/chunks/config.js:28796:14)
      at async loadAndTransform (file:///app/node_modules/vite/dist/node/chunks/config.js:22669:26)
      at async viteTransformMiddleware (file:///app/node_modules/vite/dist/node/chunks/config.js:24541:20)
6:20:45 PM [vite] Internal server error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/animation.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/animation.js:2:27
  1  |  import * as THREE from 'three';
  2  |  import { freqToHue } from '../../wasm-loader.js';
     |                             ^
  3  |  import { reactiveMaterials, _foliageReactiveColor } from './common.js';
  4  |
      at TransformPluginContext._formatLog (file:///app/node_modules/vite/dist/node/chunks/config.js:28998:43)
      at TransformPluginContext.error (file:///app/node_modules/vite/dist/node/chunks/config.js:28995:14)
      at normalizeUrl (file:///app/node_modules/vite/dist/node/chunks/config.js:27118:18)
      at async file:///app/node_modules/vite/dist/node/chunks/config.js:27176:32
      at async Promise.all (index 1)
      at async TransformPluginContext.transform (file:///app/node_modules/vite/dist/node/chunks/config.js:27144:4)
      at async EnvironmentPluginContainer.transform (file:///app/node_modules/vite/dist/node/chunks/config.js:28796:14)
      at async loadAndTransform (file:///app/node_modules/vite/dist/node/chunks/config.js:22669:26)
      at async viteTransformMiddleware (file:///app/node_modules/vite/dist/node/chunks/config.js:24541:20)
6:20:45 PM [vite] (client) Pre-transform error: Failed to resolve import "../../wasm-loader.js" from "src/foliage/common.js". Does the file exist?
  Plugin: vite:import-analysis
  File: /app/src/foliage/common.js:4:40
  2  |  import { color, mix, positionLocal, float, time, sin, cos, vec3, uniform } from 'three/tsl';
  3  |  import { MeshStandardNodeMaterial, MeshPhysicalNodeMaterial } from 'three/webgpu';
  4  |  import { fbm, isEmscriptenReady } from '../../wasm-loader.js';
     |                                          ^
  5  |
  6  |  // --- Global Uniforms ---
6:21:14 PM [vite] (client) page reload src/foliage/common.js
6:21:14 PM [vite] (client) page reload src/foliage/animation.js
6:22:52 PM [vite] (client) page reload main.js
