(function(){"use strict";self.onmessage=async r=>{const c=r.data;if(!c||!c.url)return;const n=c.url;try{const e=await fetch(n);if(!e.ok){const s=await e.text().catch(()=>"");throw new Error(`Fetch failed: status=${e.status} url=${n} bodyPreview=${s.slice(0,200)}`)}const t=e.headers.get("content-type")||e.headers.get("Content-Type")||"";if(t&&!t.includes("wasm")&&!t.includes("octet")){const s=await e.text().catch(()=>"");self.postMessage({type:"WARN",message:`Unexpected content-type: ${t}; preview: ${s.slice(0,200)}`})}let a;if(WebAssembly&&WebAssembly.compileStreaming)a=await WebAssembly.compileStreaming(Promise.resolve(e));else{const s=await e.arrayBuffer();a=await WebAssembly.compile(s)}self.postMessage({type:"SUCCESS",module:a},[a])}catch(e){const t=e&&e.stack?`${e.message}
${e.stack}`:String(e);self.postMessage({type:"ERROR",message:t})}}})();
